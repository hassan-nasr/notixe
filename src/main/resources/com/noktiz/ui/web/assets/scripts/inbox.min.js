var Inbox=function(){var j=$(".inbox-content");var e=$(".inbox-loading");var g=function(p,o){var n="inbox_inbox.html";var q=$(".inbox-nav > li."+o+" a").attr("data-title");e.show();j.html("");h(p);$.ajax({type:"GET",cache:false,url:n,dataType:"html",success:function(r){h(p);$(".inbox-nav > li.active").removeClass("active");$(".inbox-nav > li."+o).addClass("active");$(".inbox-header > h1").text(q);e.hide();j.html(r);App.fixContentHeight();App.initUniform()},error:function(t,r,s){h(p)},async:false})};var a=function(p,o,q){var n="inbox_view.html";e.show();j.html("");h(p);$.ajax({type:"GET",cache:false,url:n,dataType:"html",success:function(r){h(p);if(q){$(".inbox-nav > li.active").removeClass("active")}$(".inbox-header > h1").text("View Message");e.hide();j.html(r);App.fixContentHeight();App.initUniform()},error:function(t,r,s){h(p)},async:false})};var f=function(n){n.tag({autosizedInput:true,containerClasses:"span12",inputClasses:"m-wrap",source:function(o,p){return["Bob Nilson <bob.nilson@metronic.com>","Lisa Miller <lisa.miller@metronic.com>","Test <test@domain.com>","Dino <dino@demo.com>","Support <support@demo.com>"]}})};var m=function(){$(".inbox-wysihtml5").wysihtml5({stylesheets:["assets/plugins/bootstrap-wysihtml5/wysiwyg-color.css"]})};var i=function(){$("#fileupload").fileupload({url:"assets/plugins/jquery-file-upload/server/php/",autoUpload:true});if($.support.cors){$.ajax({url:"assets/plugins/jquery-file-upload/server/php/",type:"HEAD"}).fail(function(){$('<span class="alert alert-error"/>').text("Upload server currently unavailable - "+new Date()).appendTo("#fileupload")})}};var l=function(o){var n="inbox_compose.html";e.show();j.html("");h(o);$.ajax({type:"GET",cache:false,url:n,dataType:"html",success:function(p){h(o);$(".inbox-nav > li.active").removeClass("active");$(".inbox-header > h1").text("Compose");e.hide();j.html(p);f($('[name="to"]'));i();m();$(".inbox-wysihtml5").focus();App.fixContentHeight();App.initUniform()},error:function(r,p,q){h(o)},async:false})};var b=function(o){var n="inbox_reply.html";e.show();j.html("");h(o);$.ajax({type:"GET",cache:false,url:n,dataType:"html",success:function(p){h(o);$(".inbox-nav > li.active").removeClass("active");$(".inbox-header > h1").text("Reply");e.hide();j.html(p);$('[name="message"]').val($("#reply_email_content_body").html());f($('[name="to"]'));d();i();m();App.fixContentHeight();App.initUniform()},error:function(r,p,q){h(o)},async:false})};var c=function(o){var n="inbox_search_result.html";e.show();j.html("");h(o);$.ajax({type:"GET",cache:false,url:n,dataType:"html",success:function(p){h(o);$(".inbox-nav > li.active").removeClass("active");$(".inbox-header > h1").text("Search");e.hide();j.html(p);App.fixContentHeight();App.initUniform()},error:function(r,p,q){h(o)},async:false})};var d=function(){var o=$(".inbox-compose .mail-to .inbox-cc");var n=$(".inbox-compose .input-cc");o.hide();n.show();f($('[name="cc"]'),-10);$(".close",n).click(function(){n.hide();o.show()})};var k=function(){var o=$(".inbox-compose .mail-to .inbox-bcc");var n=$(".inbox-compose .input-bcc");o.hide();n.show();f($('[name="bcc"]'),-10);$(".close",n).click(function(){n.hide();o.show()})};var h=function(n){if(typeof n!="undefined"){return}if(n.attr("disabled")){n.attr("disabled",false)}else{n.attr("disabled",true)}};return{init:function(){$(".inbox .compose-btn a").live("click",function(){l($(this))});$(".inbox .reply-btn").live("click",function(){b($(this))});$(".inbox-content .view-message").live("click",function(){a($(this))});$(".inbox-nav > li.inbox > a").click(function(){g($(this),"inbox")});$(".inbox-nav > li.sent > a").click(function(){g($(this),"sent")});$(".inbox-nav > li.draft > a").click(function(){g($(this),"draft")});$(".inbox-nav > li.trash > a").click(function(){g($(this),"trash")});$(".inbox-compose .mail-to .inbox-cc").live("click",function(){d()});$(".inbox-compose .mail-to .inbox-bcc").live("click",function(){k()});if(App.getURLParameter("a")==="view"){a()}else{if(App.getURLParameter("a")==="compose"){l()}else{$(".inbox-nav > li.inbox > a").click()}}}}}();