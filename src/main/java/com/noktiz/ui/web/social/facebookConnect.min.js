function statusChangeCallback(b,a){console.log("statusChangeCallback");console.log(b);if(b.status==="connected"){console.log(b.authResponse.accessToken);testAPI();registerData(b.authResponse.accessToken,a)}else{if(b.status==="not_authorized"){document.getElementById("status").innerHTML="Please log into this app."}else{document.getElementById("status").innerHTML="Please log into Facebook.";FB.login()}}}function checkLoginState(a){console.log("hi");FB.getLoginStatus(function(b){statusChangeCallback(b,a)})}var appid="768865719827766";window.fbAsyncInit=function(){};loadFB=function(e,a,f){var c,b=e.getElementsByTagName(a)[0];if(e.getElementById(f)){return}c=e.createElement(a);c.id=f;c.src="//connect.facebook.net/en_US/sdk.js";b.parentNode.insertBefore(c,b)};function testAPI(){console.log("Welcome!  Fetching your information.... ");FB.api("/me",function(a){console.log("Successful login for: "+a.name);document.getElementById("status").innerHTML="Thanks for logging in, "+a.name+"!"})}function registerData(c,a,b){$.post("/registerCredential",{service:"facebook",access_token:a,facebook_id:c}).done(b());console.log("Welcome!  Fetching your information.... ");FB.api("/me",function(d){console.log("Successful login for: "+d.name);document.getElementById("status").innerHTML="Thanks for logging in, "+d.name+"!"})}ready=false;function FacebookLogin(b,c,a){if(ready==false){setTimeout(FacebookLogin(b,c,a),1000);return}FB.login(function(d){if(d.authResponse){c(d.authResponse.userID,d.authResponse.accessToken)}else{a()}},{scope:b})}function myFacebookLogin(a){if($("#agree").length==0||$("#agree").is(":checked")){FacebookLogin(a,function(c,b){$("#facebookId").val(c);$("#access_token").val(b);$("#submitData").click()},function(){$("#indImage").css("display","none")})}}function indicate(){if($("#agree").length==0||$("#agree").is(":checked")){$("#indImage").css("display","inline");$("#agreeWarning").css("display","none")}else{$("#agreeWarning").css("display","block").css("text-color","red")}}initFB=function(a){appid=a;loadFB(document,"script","facebook-jssdk");window.fbAsyncInit=function(){FB.init({appId:appid,cookie:true,version:"v2.0"});ready=true}};