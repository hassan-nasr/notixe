module("messages");test("predefined message not overwritten by addMethod(a, b, undefined)",function(){var a="my custom message";$.validator.messages.custom=a;$.validator.addMethod("custom",function(){});deepEqual(a,$.validator.messages.custom);delete $.validator.messages.custom;delete $.validator.methods.custom});test("group error messages",function(){$.validator.addClassRules({requiredDateRange:{required:true,date:true,dateRange:true}});$.validator.addMethod("dateRange",function(){return new Date($("#fromDate").val())<new Date($("#toDate").val())},"Please specify a correct date range.");var a=$("#dateRangeForm");a.validate({groups:{dateRange:"fromDate toDate"},errorPlacement:function(b){a.find(".errorContainer").append(b)}});ok(!a.valid());equal(1,a.find(".errorContainer *").length);equal("Please enter a valid date.",a.find(".errorContainer label.error").text());$("#fromDate").val("12/03/2006");$("#toDate").val("12/01/2006");ok(!a.valid());equal("Please specify a correct date range.",a.find(".errorContainer label.error").text());$("#toDate").val("12/04/2006");ok(a.valid());ok(a.find(".errorContainer label.error").is(":hidden"))});test("read messages from metadata",function(){var a=$("#testForm9");a.validate();var b=$("#testEmail9");b.valid();equal(a.find("label").text(),"required");b.val("bla").valid();equal(a.find("label").text(),"email")});test("read messages from metadata, with meta option specified, but no metadata in there",function(){var a=$("#testForm1clean");a.validate({meta:"validate",rules:{firstname:"required"}});ok(!a.valid(),"not valid")});